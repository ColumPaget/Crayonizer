CC = @CC@
VERSION = @VERSION@
CFLAGS = @CFLAGS@
LIBS = -lm @LIBS@
INSTALL=@INSTALL@
prefix=@prefix@
bindir=$(prefix)@bindir@
DESTDIR=
FLAGS=$(CFLAGS) @DEFS@



OBJ=common.o config_file.o help.o crayonizations.o text_substitutions.o status_bar.o escape_sequences.o xterm.o keypress.o signals.o timers.o

all: $(OBJ) main.c common.h
	@cd libUseful-2.6; $(MAKE)
	$(CC) $(FLAGS) -o crayonizer main.c $(LIBS) $(OBJ) libUseful-2.6/libUseful-2.6.a 

config_file.o: config_file.c config_file.h common.h
	gcc -c config_file.c

common.o: common.c common.h common.h
	gcc -c common.c

crayonizations.o: crayonizations.c crayonizations.h common.h
	gcc -c crayonizations.c

help.o: help.c help.h common.h
	gcc -c help.c

xterm.o: xterm.c xterm.h common.h
	gcc -c xterm.c

keypress.o: keypress.c keypress.h common.h
	gcc -c keypress.c

signals.o: signals.c signals.h common.h
	gcc -c signals.c

text_substitutions.o: text_substitutions.c text_substitutions.h common.h
	gcc -c text_substitutions.c

escape_sequences.o: escape_sequences.c escape_sequences.h common.h
	gcc -c escape_sequences.c

status_bar.o: status_bar.c status_bar.h common.h
	gcc -c status_bar.c

timers.o: timers.c timers.h common.h
	gcc -c timers.c


clean:
	@rm -f crayonizer *.o libUseful-2.6/*.o libUseful-2.6/*.a libUseful-2.6/*.so config.log config.status
	@rm -rf autom4te.cache 

install:
	$(INSTALL) -d $(DESTDIR)$(bindir)
	$(INSTALL) crayonizer $(DESTDIR)$(bindir)


